<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人像美化</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

    <h2>人像美化</h2>

    <input type="file" accept="image/*" id="fileInput">
    <button onclick="beautifyPortrait()">美化人像</button>

    <div id="result"></div>

    <script>
        function beautifyPortrait() {
            var fileInput = document.getElementById('fileInput');
            var file = fileInput.files[0];

            if (file) {
                var formData = new FormData();
                formData.append('api_key', 'HokI0sMFk2R9-vwvn4GrPpsSL_TKHqlV');
                formData.append('api_secret', 'iX8Wo_SlEaKd2zjc0wueNE9j68ifMuB2');
                formData.append('image_file', file);

                $.ajax({
                    url: 'https://api-cn.faceplusplus.com/facepp/v2/beautify',
                    type: 'POST',
                    processData: false,
                    contentType: false,
                    data: formData,
                    success: function (response) {
                        displayResult(response);
                    },
                    error: function (xhr, status, error) {
                        console.error('Error:', error);
                    }
                });
            } else {
                alert('選圖片！');
            }
        }

        function displayResult(result) {
            var resultDiv = document.getElementById('result');
            var imageUrl = result.base64_image;
            if (imageUrl) {
                resultDiv.innerHTML = '<img src="data:image/jpeg;base64,' + imageUrl + '" alt="美化后的人像">';
            } else {
                resultDiv.innerHTML = '影像解析失敗';
            }
        }
    </script>

</body>

</html>